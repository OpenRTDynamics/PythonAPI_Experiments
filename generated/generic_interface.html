<!doctype html>

<!-- <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script> -->
<script src="js/jquery-3.4.1.min.js"></script>
<script src="ORTD_js_simulator.js"></script>


<html>

    <div id="reload_trigger">
        Click here to (re)load from a fixed folder
    </div>

    <div id="reload_trigger2">
        Click here to (re)load from a fixed folder 2
    </div>


    <div id="remote_compile_trigger2">
        Click here to compile source on remote 2
    </div>



    <textarea id="compile_service_url" name="compile_service_url">
http://localhost:3000/compile/
    </textarea>

    <textarea id="secret_token" name="secret_token">
openrtdynamics
    </textarea>
            
    
    <div id='simulator_gui_container'>
            <div class='parameter_editor'></div>

            <div class="plot_plotly" x="x"    y="refrence y" title="x/y"           xlabel="x"         ylabel="y"     width="400" height="200"></div>
            <div class="plot_plotly" x="time" y="x y" title="time series" xlabel="time [s]"  ylabel="value" width="400" height="200"></div>
    </div>


    <div id='simulator_gui_container2'>
No simulation loaded
    </div>
        
    <div id='simulator_gui_container3'>
No simulation loaded
    </div>
                
                     

    manifest
    <textarea id="manifest" name="manifest">

    </textarea>

    source code
    <textarea id="source_code" name="source_code">

    </textarea>

<script>






    $( "#reload_trigger" ).click(function() {

        var ret = loadCompiledSimulator();
        simulator_gui_container = document.getElementById('simulator_gui_container')
        setup_simulation_gui_from_promises( simulator_gui_container, ret);
    });




    $( "#reload_trigger2" ).click(function() {

        var ret = loadCompiledSimulator();
        simulator_gui_container2 = document.getElementById('simulator_gui_container2')
        setup_simulation_gui_from_promises( simulator_gui_container2, ret);
    });







    $( "#remote_compile_trigger" ).click(function() {

        simulator_gui_container3 = document.getElementById('simulator_gui_container3')

        code = document.getElementById("source_code").value
        manifest = document.getElementById("manifest").value
        compile_service_url = document.getElementById("compile_service_url").value
        secret_token = document.getElementById("secret_token").value

        setup_simulation_gui( simulator_gui_container3, compile_service_url, secret_token, manifest, code )
        

    });

</script>

<script src="node_modules/chart.js/dist/Chart.bundle.min.js"></script>
<script src="node_modules/@json-editor/json-editor/dist/jsoneditor.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/plotly.js/1.36.1/plotly.min.js"></script>


</html>